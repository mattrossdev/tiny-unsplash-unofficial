!function(){"use strict";var c=function(e,t,n,a,r){var o=new URL(r),r=o.searchParams;return r.append("query",e),r.append("page",n.toString()),r.append("per_page",a.toString()),o.search=r.toString(),"portrait"!=t&&"landscape"!=t||r.append("orientation",t),new Promise(function(t,n){fetch(o.href).then(function(e){if(e.ok)return e.json();throw new Error("Network response was not ok")}).then(function(e){t(e.results)}).catch(function(e){console.error("An error occured: ",e),n(e)})})},a=function(n){return new Promise(function(e){if(document.querySelector(n))return e(document.querySelector(n));var t=new MutationObserver(function(){document.querySelector(n)&&(t.disconnect(),e(document.querySelector(n)))});t.observe(document.body,{childList:!0,subtree:!0})})},e=function(r){var o=tinymce.activeEditor.options.get("imageSearchURL"),e,i=(window.handleImageClick=function(n){tinymce.activeEditor.windowManager.close(),tinymce.activeEditor.execCommand("mceImage"),a('input[type="url"].tox-textfield').then(function(e){var e=e,t,t=(t=n).replace("&w=400","&w=1080");e.value=t})},function(n){var a=function(e){var t=e.urls.small,n=e.user.username,e=e.user.links.html,a='<div style="display: flex; flex-direction: column; align-items: center;">';return a=(a+='<span> <img src="'.concat(t,'" class="unsplash-search-img" style = "max-width: 80%; cursor: pointer;" onClick="handleImageClick(this.src)"; tabindex=\'0\'> </span>'))+'<span style = "margin-top: 5px"> Photo by <a href = '.concat(e,">@").concat(n," </a> </span>")+"</div>"},e,t=function(){var e="";e+='<div style = "display: grid; grid-template-columns: 1fr 1fr;">';for(var t=0;t<n.length;t++)e+=a(n[t]);return e+="</div>"}();return r.windowManager.open({title:"Results via Unsplash",body:{type:"panel",items:[{type:"input",name:"search",label:"Search"},{type:"selectbox",name:"orientation",label:"Orientation",size:1,items:[{value:"all",text:"All"},{value:"landscape",text:"Landscape"},{value:"portrait",text:"Portrait"}]},{type:"htmlpanel",html:t}]},buttons:[{type:"cancel",text:"Close"},{type:"submit",text:"Search",primary:!0}],onSubmit:function(t){var e=t.getData().search,n=t.getData().orientation;t.close(),c(e,n,1,10,o).then(function(e){t.close(),i(e)}).catch(function(e){console.error("An error occured: ",e)})}})}),t=function(){return r.windowManager.open({title:"Search Unsplash",body:{type:"panel",items:[{type:"input",name:"search",label:"Search"},{type:"selectbox",name:"orientation",label:"Orientation",size:1,items:[{value:"all",text:"All"},{value:"landscape",text:"Landscape"},{value:"portrait",text:"Portrait"}]}]},buttons:[{type:"cancel",text:"Close"},{type:"submit",text:"Search",primary:!0}],onSubmit:function(t){var e=t.getData().search,n=t.getData().orientation;c(e,n,1,10,o).then(function(e){t.close(),i(e)}).catch(function(e){console.error("An error occured: ",e)})}})};r.ui.registry.addButton("unsplash-unofficial",{text:"Unsplash",onAction:function(){t()}})};function t(){tinymce.PluginManager.add("unsplash-unofficial",e)}t()}();